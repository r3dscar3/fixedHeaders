!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.fixedHeaders=i()}(this,function(){"use strict";function e(e,i){this.el=e,this.elCopy=this.el.cloneNode(!0),this.elCopyAttached=!1,this.releaseAtLastSibling=i&&i.releaseAtLastSibling||!1,this.scrollTarget=i&&i.scrollTarget?document.getElementById(i.scrollTarget):window,this.fixedHeaderOffset=i&&i.fixedHeaderOffset||0}function i(e){var i=this;this.privateInstances=e||[],this.cleanup=function(){i.privateInstances.forEach(function(e){e.cleanup()})}}function t(t,n){var s="string"==typeof t?document.querySelectorAll(t):t,o=[];"length"in s||(s=[s]);for(var r=0;r<s.length;r+=1){var d=s[r],a=new e(d,n);o.push(a),a.manageFixing()}return new i(o)}return e.prototype.manageFixing=function(){var e=this,i=this.el,t=this.elCopy,n=this.fixedHeaderOffset,s=t.style,o=t.classList,r=i.parentNode,d=i.getBoundingClientRect().top-n,a=this.releaseAtLastSibling,l=a?i.nextSibling.lastChild.offsetHeight:0,f=d+r.offsetHeight-i.offsetHeight-l,h=this.scrollTarget;this.fixing=function(){var a=i.offsetWidth;if(window.innerWidth>i.scrollWidth){var c=h.scrollTop;c<d?o.contains("js-is-fixyHeader")&&(o.remove("js-is-fixyHeader"),s.position="",e.elCopyAttached&&(r.removeChild(t),e.elCopyAttached=!1)):c>d&&c<f?(o.contains("js-is-fixyHeader")||o.add("js-is-fixyHeader"),o.contains("js-is-fixedHeader")&&(o.remove("js-is-fixedHeader"),s.bottom="",s.position="fixed",s.top=n+"px",s.width=a+"px"),o.contains("js-is-fixyHeader")&&!e.elCopyAttached&&(r.appendChild(t),o.add("cloned"),s.position="fixed",s.top=n+"px",s.width=a+"px",e.elCopyAttached=!0)):c>f&&!o.contains("js-is-fixedHeader")&&(o.remove("js-is-fixyHeader"),o.add("js-is-fixedHeader"),s.position="absolute",s.top="",s.bottom=l+"px")}},this.removeChildrenThenFix=function(){e.elCopyAttached&&(r.removeChild(t),e.elCopyAttached=!1),e.fixing()},window.addEventListener("resize",this.removeChildrenThenFix),h.addEventListener("scroll",e.fixing)},e.prototype.cleanup=function(){window.removeEventListener("resize",this.removeChildrenThenFix),this.scrollTarget.removeEventListener("scroll",_this.fixing)},t});
