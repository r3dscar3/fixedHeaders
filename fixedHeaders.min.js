!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.fixedHeaders=i()}(this,function(){"use strict";function e(e,i){this.el=e,this.elCopy=this.el.cloneNode(!0),this.elCopyAttached=!1,this.releaseAtLastSibling=i&&i.releaseAtLastSibling||!1,this.scrollTarget=i&&document.getElementById(i.scrollTarget)||window,this.fixedHeaderOffset=i&&i.fixedHeaderOffset||0}function i(e){var i=this;this.privateInstances=e||[],this.cleanup=function(){i.privateInstances.forEach(function(e){e.cleanup()})}}function t(t,n){var o="string"==typeof t?document.querySelectorAll(t):t,s=[];"length"in o||(o=[o]);for(var r=0;r<o.length;r+=1){var a=o[r],d=new e(a,n);s.push(d),d.manageFixing()}return new i(s)}return e.prototype.manageFixing=function(){var e=this,i=this.el,t=this.elCopy,n=this.fixedHeaderOffset,o=t.style,s=t.classList,r=i.parentNode,a=i.getBoundingClientRect().top-n,d=this.releaseAtLastSibling,l=d?i.nextSibling.lastChild.offsetHeight:0,f=a+r.offsetHeight-i.offsetHeight-l,h=this.scrollTarget;this.fixing=function(){var d=i.offsetWidth;if(window.innerWidth>i.scrollWidth){var c=h.scrollY;c<a?s.contains("js-is-fixyHeader")&&(s.remove("js-is-fixyHeader"),o.position="",e.elCopyAttached&&(r.removeChild(t),e.elCopyAttached=!1)):c>a&&c<f?(s.contains("js-is-fixyHeader")||s.add("js-is-fixyHeader"),s.contains("js-is-fixedHeader")&&(s.remove("js-is-fixedHeader"),o.bottom="",o.position="fixed",o.top=n+"px",o.width=d+"px"),s.contains("js-is-fixyHeader")&&!e.elCopyAttached&&(r.appendChild(t),s.add("cloned"),o.position="fixed",o.top=n+"px",o.width=d+"px",e.elCopyAttached=!0)):c>f&&!s.contains("js-is-fixedHeader")&&(s.remove("js-is-fixyHeader"),s.add("js-is-fixedHeader"),o.position="absolute",o.top="",o.bottom=l+"px")}},this.getDoFixingOnAnimationFrame=function(){return e.scrollTarget.requestAnimationFrame(e.fixing)},this.removeChildrenThenFix=function(){e.elCopyAttached&&(r.removeChild(t),e.elCopyAttached=!1),e.fixing()},window.addEventListener("resize",this.removeChildrenThenFix),h.addEventListener("scroll",this.getDoFixingOnAnimationFrame)},e.prototype.cleanup=function(){window.removeEventListener("resize",this.removeChildrenThenFix),this.scrollTarget.removeEventListener("scroll",this.getDoFixingOnAnimationFrame)},t});
