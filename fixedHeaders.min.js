(function(f,g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define(g):f.fixedHeaders=g()})(this,function(){function f(a,b){this.el=a;this.elCopy=this.el.cloneNode(!0);this.elCopyAttached=!1;this.scrollTarget=b&&b.scrollTarget||window;this.fixedHeaderOffset=b&&b.fixedHeaderOffset||0}function g(a){var b=this;this.privateInstances=a||[];this.cleanup=function(){b.privateInstances.forEach(function(a){a.cleanup()})}}f.prototype.manageFixing=
function(){var a=this,b=this.el,e=this.elCopy,h=this.fixedHeaderOffset,c=e.style,d=e.classList,f=b.parentNode,g=b.getBoundingClientRect().top-h,l=b.nextSibling.lastChild.offsetHeight||0,m=g+f.offsetHeight-b.offsetHeight-l,n=this.scrollTarget;this.fixing=function(){var p=b.offsetWidth;if(window.innerWidth>b.scrollWidth){var k=n.scrollY;k<g?d.contains("js-is-fixyHeader")&&(d.remove("js-is-fixyHeader"),c.position="",a.elCopyAttached&&(f.removeChild(e),a.elCopyAttached=!1)):k>g&&k<m?(d.contains("js-is-fixyHeader")||
d.add("js-is-fixyHeader"),d.contains("js-is-fixedHeader")&&(d.remove("js-is-fixedHeader"),c.bottom="",c.position="fixed",c.top=h+"px",c.width=p+"px"),d.contains("js-is-fixyHeader")&&!a.elCopyAttached&&(f.appendChild(e),d.add("cloned"),c.position="fixed",c.top=h+"px",c.width=p+"px",a.elCopyAttached=!0)):k>m&&!d.contains("js-is-fixedHeader")&&(d.remove("js-is-fixyHeader"),d.add("js-is-fixedHeader"),c.position="absolute",c.top="",c.bottom=l+"px")}};this.getDoFixingOnAnimationFrame=function(){return a.scrollTarget.requestAnimationFrame(a.fixing)};
this.removeChildrenThenFix=function(){a.elCopyAttached&&(f.removeChild(e),a.elCopyAttached=!1);a.fixing()};window.addEventListener("resize",this.removeChildrenThenFix);n.addEventListener("scroll",this.getDoFixingOnAnimationFrame)};f.prototype.cleanup=function(){window.removeEventListener("resize",this.removeChildrenThenFix);this.scrollTarget.removeEventListener("scroll",this.getDoFixingOnAnimationFrame)};return function(a,b){var e="string"===typeof a?document.querySelectorAll(a):a,h=[];"length"in
e||(e=[e]);for(var c=0;c<e.length;c+=1){var d=new f(e[c],b);h.push(d);d.manageFixing()}return new g(h)}});
